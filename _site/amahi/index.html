<!DOCTYPE html>
<html>
  <head>
    <title>Turn an old laptop into a home server with remote access over VPN – Alexej Gossmann</title>

        <meta charset="utf-8">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    
    <meta name="description" content="This weekend I have set up an old laptop with a broken screen as an Amahi server in my house, such that I can access the files stored on the server with my other computers from anywhere.1 I use OpenVPN to establish a connection to the server and its files. As an additional benefit, connecting over a VPN when on a public network secures the traffic to and from you.


  
    
      Initially I got the idea for a home server after an email from Dropbox informed me that my promotional 48 GB of storage space expire in a month. Instead of paying one of the numerous cloud storage providers, I decided to host an ownCloud at home (after some guides online made it sound easier than it actually is…). Unfortunately, ownCloud on an Amahi server turned out to be quite disappointing. I found ownCloud to lack some functionality and to be very inconvenient in certain ways, and it possibly poses a security risk when accessible from outside the local network. So, I eventually got rid of ownCloud, and retreated to storing my files directly on the server in file shares. ↩
    
  

">
    <meta property="og:description" content="This weekend I have set up an old laptop with a broken screen as an Amahi server in my house, such that I can access the files stored on the server with my other computers from anywhere.1 I use OpenVPN to establish a connection to the server and its files. As an additional benefit, connecting over a VPN when on a public network secures the traffic to and from you.


  
    
      Initially I got the idea for a home server after an email from Dropbox informed me that my promotional 48 GB of storage space expire in a month. Instead of paying one of the numerous cloud storage providers, I decided to host an ownCloud at home (after some guides online made it sound easier than it actually is…). Unfortunately, ownCloud on an Amahi server turned out to be quite disappointing. I found ownCloud to lack some functionality and to be very inconvenient in certain ways, and it possibly poses a security risk when accessible from outside the local network. So, I eventually got rid of ownCloud, and retreated to storing my files directly on the server in file shares. ↩
    
  

">
    
    <meta name="author" content="Alexej Gossmann">

    
    <meta property="og:title" content="Turn an old laptop into a home server with remote access over VPN">
    <meta property="twitter:title" content="Turn an old laptop into a home server with remote access over VPN">
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="alternate" type="application/rss+xml" title="Alexej Gossmann - PhD student with focus on statistics, machine learning, and programming, among other things" href="/feed.xml">

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->

    <!-- MathJax integration and configuration-->
    <!-- Use standard LaTeX delimiters and turn on equation numbering -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ["$","$"] ],
        displayMath: [ ["$$","$$"] ],
        processEscapes: true
      },
      TeX: {
        equationNumbers: { autoNumber: "AMS" },
        Macros: {
          subscript: ['_{#1}', 1],
          superscript: ['^{#1}', 1]
        }
      }
    });
    </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML-full">
    </script>
 </head>

  <body>
    <div class="wrapper-masthead">
      <header class="masthead clearfix">
        <a href="/" class="site-avatar"><img src="/images/avatar.png"></a>

        <div class="site-info">
          <h1 class="site-name"><a href="/">Alexej Gossmann</a></h1>
          <p class="site-description">PhD student with focus on statistics, machine learning, and programming, among other things</p>
        </div>

        <nav>
          <a href="/">/blog/</a>
          <a href="/publications">/publications/</a>
          <a href="/code">/code/</a>
          <a href="/about">/about/</a>
        </nav>
      </header>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>Turn an old laptop into a home server with remote access over VPN</h1>

  <div class="entry">
    <p>This weekend I have set up an old laptop with a broken screen as an <a href="https://www.amahi.org/">Amahi</a> server in my house, such that I can access the files stored on the server with my other computers from anywhere.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> I use OpenVPN to establish a connection to the server and its files. As an additional benefit, <a href="https://www.expressvpn.com/internet-privacy/guides/vpn-security-work/">connecting over a VPN when on a public network secures the traffic to and from you</a>.</p>

<p>I have no previous experience with server setup, and it turned out to take longer than I expected. It was quite a frustrating experience, I must admit <img class="emoji" title=":unamused:" alt=":unamused:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f612.png" height="20" width="20">. Therefore I decided to document the final setup for future-me or anybody else interested in doing something similar. I’m by no means an expert on any of that (just to make it clear), but everything works to my satisfaction now <img class="emoji" title=":satisfied:" alt=":satisfied:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f606.png" height="20" width="20">.</p>

<h3 id="here-are-the-steps-to-reproduce-my-setup">Here are the steps to reproduce my setup</h3>

<ol>
  <li>
    <p>Install Amahi. Well, first install <em>the correct version of Fedora</em> (<em>not</em> the latest release). I am using <a href="https://wiki.amahi.org/index.php/Amahi_9_Install">Amahi 9 on Fedora 23</a>, which is currently the officially supported setup.</p>
  </li>
  <li>
    <p>Put the IP of your server into the address bar of a web browser in another machine on the local network (the IP can be determined with <code class="highlighter-rouge">hostname -I</code> in the server’s console). This will bring you to a login screen of the web interface of your server.
Here I experienced some buggy behavior: The web interface would not accept my credentials, until <a href="https://wiki.amahi.org/index.php/Reset_Amahi_Password">I reset my Amahi password</a> over an SSH session.</p>
  </li>
  <li>
    <p>Use the web interface to create additional <a href="https://wiki.amahi.org/index.php/Storage_and_file_sharing#Step_2:_Create_Shares">file shares</a> and users, and to install apps by point-and-click onto the Amahi server.</p>
  </li>
  <li>
    <p>Now, <a href="https://wiki.amahi.org/index.php/Transition_to_Amahi">the Amahi wiki suggests to turn off your router’s DHCP, in order to use the home server for DNS</a>. However, in my final setup I skipped that step, since I don’t use any Amahi apps other than the OpenVPN (which does not require this step). But if you decide to do this, then take a look at <a href="https://wiki.amahi.org/index.php/Network_troubleshooting">the wiki page on network troubleshooting</a> first.</p>
  </li>
  <li>
    <p>Pay 5$ for the <a href="https://www.amahi.org/apps/openvpn">OpenVPN app</a> (most <a href="https://www.amahi.org/apps">Amahi server apps</a> are offered free of cost, but some require a “convenience fee for one-click installation”).</p>
  </li>
  <li>
    <p><a href="https://wiki.amahi.org/index.php/OpenVPN">Install OpenVPN</a>.</p>
  </li>
  <li>
    <p><a href="https://wiki.amahi.org/index.php/OpenVPN_clients">Get VPN clients for your computers/devices</a>. I use <a href="https://wiki.amahi.org/index.php/VPNLinux">my laptop and my work computer (both Linux machines)</a> to log into the server remotely.</p>
  </li>
  <li>
    <p>You can access your file shares with an ordinary file browser / finder / file manager (obviously you need to start OpenVPN first, if outside the home network).</p>
  </li>
</ol>

<hr>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Initially I got the idea for a home server after an email from Dropbox informed me that my promotional 48 GB of storage space expire in a month. Instead of paying one of the numerous cloud storage providers, I decided to host an <a href="https://owncloud.com/">ownCloud</a> at home (after <a href="http://lifehacker.com/5993596/how-to-set-up-your-own-private-cloud-storage-service-in-five-minutes-with-owncloud">some</a> <a href="http://lifehacker.com/turn-an-old-pc-into-a-nas-vpn-media-streamer-and-mor-1516484110">guides</a> online made it sound easier than it actually is…). Unfortunately, ownCloud on an Amahi server turned out to be quite disappointing. I found ownCloud to lack some functionality and to be very inconvenient in certain ways, and <a href="https://forums.amahi.org/viewtopic.php?t=4956">it possibly poses a security risk when accessible from outside the local network</a>. So, I eventually got rid of ownCloud, and retreated to storing my files directly on the server in <a href="https://wiki.amahi.org/index.php/Storage_and_file_sharing#Step_2:_Create_Shares">file shares</a>. <a href="#fnref:1" class="reversefootnote">↩</a></p>
    </li>
  </ol>
</div>

  </div>

  <div class="date">
    Written on November  7, 2016
  </div>

  <div class="date">
    Tags:
    
    <a href="/tag/technology">#technology</a>
    
    <a href="/tag/linux">#linux</a>
    
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'agisga';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:alexej.go@gmail.com"><i class="svg-icon email"></i></a>
<a href="https://www.facebook.com/alexej.yexela"><i class="svg-icon facebook"></i></a>

<a href="https://github.com/agisga"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/alexejgossmann"><i class="svg-icon linkedin"></i></a>

<a href="/feed.xml"><i class="svg-icon rss"></i></a>




        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-94080131-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/amahi/',
		  'title': 'Turn an old laptop into a home server with remote access over VPN'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
